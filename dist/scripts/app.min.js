var Acid=Acid||{};Acid.Poller=function(a,b){"use strict";b=b||{},_.extend(this,Backbone.Events),this.interval=b.interval||1e4,this.maxRetries=b.maxRetries||5,this.callable=b.callable||function(){console.log("called")},this.intervalId=null,this.active=!1,this.count=0,this.model=a,this.modelEvent=b.modelEvent||"request",this.start=function(){this.active!==!0&&(this.active=!0,this.listenTo(this.model,this.modelEvent,this.increment),this.intervalId=window.setInterval(this.callable,this.interval,this.model),this.trigger("poller:start"))},this.increment=function(){this.active&&this.count===this.maxRetries?(this.trigger("poller:failed"),this.stop()):this.active?(this.count+=1,this.trigger("poller:retry",this.count)):this.count=0},this.stop=function(){this.active&&(window.clearInterval(this.intervalId),this.trigger("poller:stop"),this.stopListening(this.model),this.count=0,this.active=!1,this.intervalId=null)}};